(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.conllu=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){exports.Conllu=require("./lib/Conllu.js").Conllu;exports.MultiwordToken=require("./lib/MultiwordToken.js").MultiwordToken;exports.Sentence=require("./lib/Sentence.js").Sentence;exports.Token=require("./lib/Token.js").Token},{"./lib/Conllu.js":2,"./lib/MultiwordToken.js":3,"./lib/Sentence.js":4,"./lib/Token.js":5}],2:[function(require,module,exports){if(typeof exports!=="undefined"&&this.exports!==exports){var Sentence=require("./Sentence.js").Sentence;var MultiwordToken=require("./MultiwordToken.js").MultiwordToken}var Conllu=function(){this.sentences=[]};Conllu.prototype={splitSentence:function(sentence_index,token_id){for(var i=0;i<this.sentences.length;i++){if(i===sentence_index){var newSentence=new Sentence;currentId=0;newId=1;removeIds=[];for(var j=token_id;j<this.sentences[i].tokens.length;j++){if(!(this.sentences[i].tokens[j]instanceof MultiwordToken)){newSentence.tokens.push(this.sentences[i].tokens[j]);newSentence.tokens[currentId].id=newId;newId=newId+1;currentId=currentId+1;removeIds.push(j)}else{newSentence.tokens.push(this.sentences[i].tokens[j]);newSentence.tokens[currentId].tokens.forEach(function(child){child.id=newId;newId=newId+1;removeIds.push(j)});currentId=currentId+1}}for(var h=removeIds.length-1;h>=0;h--){var id=removeIds[h];this.sentences[i].tokens.splice(id,1)}}}this.sentences.splice(sentence_index+1,0,newSentence)},mergeSentence:function(sentence_index){var sentence=this.sentences[sentence_index];while(this.sentences[sentence_index+1].tokens[0]!==undefined){var current=this.sentences[sentence_index+1].tokens.shift();this.sentences[sentence_index].tokens.push(current)}this.sentences.splice(sentence_index+1,1);var id=0;for(var x in this.sentences[sentence_index].tokens){var word=this.sentences[sentence_index].tokens[x];if(!(word instanceof MultiwordToken)){id++;word.id=id}else{for(var subtoken in word.tokens){id++;word.tokens[subtoken].id=id}}}}};Object.defineProperty(Conllu.prototype,"serial",{get:function(){var serialArray=[];for(var i=0;i<this.sentences.length;i++){serialArray.push(this.sentences[i].serial)}return serialArray.join("\n")},set:function(arg){var lines=arg.split("\n");var sent=[];for(var i=0;i<lines.length;i++){if(lines[i]===""){sent.push(lines[i]);var sentCat=sent.join("\n");var setSentence=new Sentence;setSentence.serial=sentCat;this.sentences.push(setSentence);sent=[]}else{sent.push(lines[i])}}}});if(typeof exports!=="undefined"&&this.exports!==exports){exports.Conllu=Conllu}},{"./MultiwordToken.js":3,"./Sentence.js":4}],3:[function(require,module,exports){if(typeof exports!=="undefined"&&this.exports!==exports){var Token=require("./Token.js").Token;var TokenAggregate=require("./TokenAggregate.js").TokenAggregate}var MultiwordToken=function(){Token.call(this);this.tokens=[];TokenAggregate.call(this,"tokens")};MultiwordToken.prototype=new Token;Object.defineProperty(MultiwordToken.prototype,"id",{get:function(){if(this.tokens.length<1){return"?-?"}var first=this.tokens[0];var last=this.tokens[this.tokens.length-1];id=first.id+"-"+last.id;return String(id)},set:function(value){}});Object.defineProperty(MultiwordToken.prototype,"serial",{get:function(){var finalString="";var parentForm=this.form;if(parentForm.includes("'")){parentForm=parentForm.replace("'","'")}var parentSerialGetter=Object.getOwnPropertyDescriptor(Token.prototype,"serial");var parentMWT=parentSerialGetter.get.call(this);finalString=finalString+parentMWT;for(word in this.tokens){finalString=finalString+"\n"+this.tokens[word].serial}return finalString},set:function(mwtString){var mwtLines=mwtString.split("\n");var parentSerialSetter=Object.getOwnPropertyDescriptor(Token.prototype,"serial");parentSerialSetter.set.call(this,mwtLines[0]);this.tokens=[];for(i=1;i<mwtLines.length;i++){var subToken=new Token;subToken.serial=mwtLines[i];this.tokens.push(subToken)}}});if(typeof exports!=="undefined"&&this.exports!==exports){exports.MultiwordToken=MultiwordToken}},{"./Token.js":5,"./TokenAggregate.js":6}],4:[function(require,module,exports){if(typeof exports!=="undefined"&&this.exports!==exports){var Token=require("./Token.js").Token;var MultiwordToken=require("./MultiwordToken.js").MultiwordToken;var TokenAggregate=require("./TokenAggregate.js").TokenAggregate}var Sentence=function(){this.comments=[];this.tokens=[];TokenAggregate.call(this,"tokens")};Sentence.prototype={expand:function(token_id,index){var found=false;for(var i=0;i<this.tokens.length;i++){if(found===true){if(!(this.tokens[i]instanceof MultiwordToken)){this.tokens[i].id++}else{this.tokens[i].tokens.forEach(function(child){child.id++})}}else if(this.tokens[i].id===token_id&&!(this.tokens[i]instanceof MultiwordToken)){var initial=new Token;var second=new Token;var expandToken=new MultiwordToken;expandToken.form=this.tokens[i].form;initial.form=this.tokens[i].form.slice(0,index);initial.id=this.tokens[i].id;second.form=this.tokens[i].form.slice(index);second.id=Number(this.tokens[i].id)+1;expandToken.tokens.push(initial);expandToken.tokens.push(second);this.tokens.splice(i,1,expandToken);found=true}}},collapse:function(token_id){var found=false;for(var i=0;i<this.tokens.length;i++){if(found===true){if(!(this.tokens[i]instanceof MultiwordToken)){this.tokens[i].id=Number(this.tokens[i].id-(mwt_length-1))}else{this.tokens[i].tokens.forEach(function(child){child.id=Number(child.id-(mwt_length-1))})}}else if(this.tokens[i].id===token_id){if(this.tokens[i]instanceof MultiwordToken){var mwt_length=this.tokens[i].tokens.length;var collapsed=new Token;collapsed.id=Number(this.tokens[i].tokens[0].id);collapsed.form=this.tokens[i].form;this.tokens.splice(i,1,collapsed);found=true}}}},splitComment:function(comment_index,character_index){for(var i=0;i<this.comments.length;i++){if(i===comment_index){var newComment=this.comments[i].slice(character_index);this.comments[i]=this.comments[i].slice(0,character_index);this.comments.splice(i+1,0,newComment)}}},mergeComment:function(comment_index){this.comments[comment_index]=this.comments[comment_index]+this.comments[comment_index+1];this.comments.splice(comment_index+1,1)}};Object.defineProperty(Sentence.prototype,"serial",{get:function(){var serialArray=[];for(var i=0;i<this.comments.length;i++){serialArray.push("#"+this.comments[i])}for(var i=0;i<this.tokens.length;i++){serialArray.push(this.tokens[i].serial)}serialArray.push("");return serialArray.join("\n")},set:function(arg){this.comments=[];this.tokens=[];var lines=arg.split("\n");for(var i=0;i<lines.length;i++){if(lines[i].startsWith("#")){this.comments.push(lines[i]);this.comments[i]=this.comments[i].substring(1)}}var mwtSubIds=[];for(var i=0;i<lines.length;i++){var fields=[];fields=lines[i].split("\t");var currentLineId=fields[0];if(!lines[i].startsWith("#")&&!(lines[i]==="")){var mwtId=null;if(fields[0].includes("-")){mwtString=lines[i]+"\n";mwtId=fields[0];dashIndex=fields[0].indexOf("-");var first=Number(mwtId.slice(0,dashIndex));var last=Number(mwtId.slice(dashIndex+1));var span=[];while(first<=last){span.push(Number(first++))}mwtSubIds=span.map(function(id){return id});span=span.map(String);for(var j=0;j<lines.length;j++){var innerFields=[];innerFields=lines[j].split("\t");for(var x=0;x<span.length;x++){if(span[x]===innerFields[0]){mwtString=mwtString+(lines[j]+"\n")}}}mwtString=mwtString.substring(0,mwtString.length-1);var setMwt=new MultiwordToken;setMwt.serial=mwtString;this.tokens.push(setMwt)}else if(mwtSubIds.indexOf(Number(currentLineId))===-1){var setToken=new Token;setToken.serial=lines[i];this.tokens.push(setToken)}}}}});if(typeof exports!=="undefined"&&this.exports!==exports){exports.Sentence=Sentence}},{"./MultiwordToken.js":3,"./Token.js":5,"./TokenAggregate.js":6}],5:[function(require,module,exports){var Token=function(){};Token.prototype={id:undefined,form:"",lemma:undefined,upostag:undefined,xpostag:undefined,feats:undefined,head:undefined,deprel:undefined,deps:undefined,misc:undefined};Object.defineProperty(Token.prototype,"serial",{get:function(){var id_output="_";if(!(this.id===undefined)&&!(this.id==="")){id_output=String(this.id)}var form_output="_";if(!(this.id===undefined)&&!(this.id==="")){form_output=String(this.form)}var lemma_output="_";if(!(this.lemma===undefined)&&!(this.lemma==="")){lemma_output=String(this.lemma)}var upostag_output="_";if(!(this.upostag===undefined)&&!(this.upostag==="")){upostag_output=String(this.upostag)}var xpostag_output="_";if(!(this.xpostag===undefined)&&!(this.xpostag==="")){xpostag_output=String(this.xpostag)}var feats_output="_";if(!(this.feats===undefined)&&!(this.feats==="")){feats_output=String(this.feats)}var head_output="_";if(!(this.head===undefined)&&!(this.head==="")){head_output=String(this.head)}var deprel_output="_";if(!(this.deprel===undefined)&&!(this.deprel==="")){deprel_output=String(this.deprel)}var deps_output="_";if(!(this.deps===undefined)&&!(this.deps==="")){deps_output=String(this.deps)}var misc_output="_";if(!(this.misc===undefined)&&!(this.misc==="")){misc_output=String(this.misc)}return id_output+"\t"+form_output+"\t"+lemma_output+"\t"+upostag_output+"\t"+xpostag_output+"\t"+feats_output+"\t"+head_output+"\t"+deprel_output+"\t"+deps_output+"\t"+misc_output},set:function(arg){var fields=arg.split("\t");this.id=Number(fields[0]);if(this.id==="_")this.id=undefined;this.form=fields[1];if(this.form==="_")this.form=undefined;this.lemma=fields[2];if(this.lemma==="_")this.lemma=undefined;this.upostag=fields[3];if(this.upostag==="_")this.upostag=undefined;this.xpostag=fields[4];if(this.xpostag==="_")this.xpostag=undefined;this.feats=fields[5];if(this.feats==="_")this.feats=undefined;this.head=fields[6];if(this.head==="_")this.head=undefined;this.deprel=fields[7];if(this.deprel==="_")this.deprel=undefined;this.deps=fields[8];if(this.deps==="_")this.deps=undefined;this.misc=fields[9];if(this.misc==="_")this.misc=undefined}});if(typeof exports!=="undefined"&&this.exports!==exports){exports.Token=Token}},{}],6:[function(require,module,exports){if(typeof exports!=="undefined"&&this.exports!==exports){var Token=require("./Token.js").Token;var MultiwordToken=require("./MultiwordToken.js").MultiwordToken}var TokenAggregate=function(token_array){this.split=function(token_id,string_index){var found=false;for(var x=0;x<this[token_array].length;x++){if(found===true){var MultiwordToken=require("../lib/MultiwordToken.js").MultiwordToken;if(!(this[token_array][x]instanceof MultiwordToken)){this[token_array][x].id++}else{this[token_array][x].tokens.forEach(function(child){child.id++})}}else if(this[token_array][x].id===token_id){var splitter=this[token_array][x];var word=new Token;if(String(token_id).includes("-")){word.id=splitter.tokens[splitter.tokens.length-1].id}else{word.id=token_id}word.form=splitter.form.slice(string_index);splitter.form=splitter.form.slice(0,string_index);this[token_array].splice(x+1,0,word);found=true}else{var MultiwordToken=require("../lib/MultiwordToken.js").MultiwordToken;if(this[token_array][x]instanceof MultiwordToken){var prev_length=this[token_array][x].tokens.length;this[token_array][x].split(token_id,string_index);if(prev_length!==this[token_array][x].tokens.length){found=true}}}}};this.merge=function(token_id){found=false;for(var x in this[token_array]){if(found===true){var MultiwordToken=require("../lib/MultiwordToken.js").MultiwordToken;if(!(this[token_array][x]instanceof MultiwordToken)){this[token_array][x].id=this[token_array][x].id-1}else{this[token_array][x].tokens.forEach(function(child){child.id=child.id-1})}}else if(this[token_array][x].id===token_id){var merger=this[token_array][x];var gone=this[token_array][Number(x)+1];merger.form=merger.form+gone.form;this[token_array].splice(Number(x)+1,1);found=true}else{var MultiwordToken=require("../lib/MultiwordToken.js").MultiwordToken;if(this[token_array][x]instanceof MultiwordToken){var prev_length=this[token_array][x].tokens.length;this[token_array][x].merge(token_id);if(prev_length!==this[token_array][x].tokens.length){found=true}}}}}};if(typeof exports!=="undefined"&&this.exports!==exports){exports.TokenAggregate=TokenAggregate}},{"../lib/MultiwordToken.js":3,"./MultiwordToken.js":3,"./Token.js":5}]},{},[1])(1)});
